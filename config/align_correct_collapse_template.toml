# ------------------------------------------------------------------------------------------------------------
# Align -> Correct -> Collapse Configuration
# ------------------------------------------------------------------------------------------------------------
# -------------------------------------------- Test Case Description -----------------------------------------
#
# - Organism:
# - Sample(s):
# - Assembly:
# - Platform:
#
# -------------------------------------------- Summary
#
# ------------------------------------------------------------------------------------------------------------

run_id  = ""       # base-name to save under (eg. "WTC11")

[run]
version    = ""    # version of FLAIR (eg. "2.0.0")
conda_env  = ""    # name of user installed conda FLAIR env (eg. "flair2")
work_dir   = ""    # where output will be saved - relative to test suite (eg. "./outputs")

# shared inputs
data_dir   = ""         # where data lives for run
reads_file = ""         # reads fasta
genome_fa  = ""     # reference genome fasta
gtf = ""             # annotation GTF
regions_tsv = ""    # (eg regions_of_interest.tsv)
junctions = ""                                        # optional
experiment_5_prime_regions_bed_file = ""  # optional
experiment_3_prime_regions_bed_file = ""  # optional
reference_5_prime_regions_bed_file =  ""  # optional
reference_3_prime_regions_bed_file =  ""  # optional

# ------------------------------------------------------------------------------------------------------------
# -------- ALIGN ------------------------------------------------------
# ------------------------------------------------------------------------------------------------------------

[[run.stages]]
name = "align"

[run.stages.flags]

# ------------------------------------------------------------------------------------------------------------
# -------- CORRECT ----------------------------------------------------
# ------------------------------------------------------------------------------------------------------------

[[run.stages]]
name = "correct"
requires = ["align"]

[run.stages.flags]

# ------------------------------------------------------------------------------------------------------------
# -------- COLLAPSE ----------------------------------------------------
# ------------------------------------------------------------------------------------------------------------

[[run.stages]]
name = "collapse"
requires = ["correct"]

[run.stages.flags]

# ------------------------------------------------------------------------------------------------------------
# -------- COMBINE ----------------------------------------------------
# ------------------------------------------------------------------------------------------------------------

[[run.stages]]
name = "combine"
requires = ["collapse"]

[run.stages.flags]
manifest = ""  # path to existing manifest TSV (collapse output appended)

# ------------------------------------------------------------------------------------------------------------
# -------- QUANTIFY ----------------------------------------------------
# ------------------------------------------------------------------------------------------------------------

[[run.stages]]
name = "quantify"
requires = ["combine"]

[run.stages.flags]
manifest = ""  # required when combine is upstream

# ------------------------------------------------------------------------------------------------------------
# -------- QC CONFIGURATION -----------------------------------------------
# ------------------------------------------------------------------------------------------------------------

[qc.collapse.TED]
#window = 50

# Optional SQANTI QC â€“ runs sqanti3_qc if the conda environment exists
[qc.collapse.SQANTI]
#conda_env = "sqanti"   # name of SQANTI conda env; skip if missing
#cpus = 8                # CPUs to pass to SQANTI3
